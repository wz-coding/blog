import{_ as n,o as a,c as s,d as t}from"./app-3c4fbf86.js";const e={},p=t(`<h1 id="canvas清晰度处理" tabindex="-1"><a class="header-anchor" href="#canvas清晰度处理" aria-hidden="true">#</a> canvas清晰度处理</h1><p>在使用 <code>canvas</code> 元素画图或其他操作时，可能会遇到图像模糊的情况，这很有可能是 <code>canvas</code> 的宽、高属性与图像的宽、高属性之间没有进行合理的设置，使两者之间没有达到平衡关系导致的。</p><h2 id="解决方法" tabindex="-1"><a class="header-anchor" href="#解决方法" aria-hidden="true">#</a> 解决方法</h2><p>解决 <code>canvas</code> 图像清晰度的方法首先需要理解以下几个概念：</p><ul><li><code>el.naturalWidth/naturalHeight(width/height)</code>：图像的自然尺寸（或者叫原始尺寸），表示图像自身的 css 尺寸大小。</li><li><code>el.style.width/height</code>：图像的样式尺寸，表示给图像上添加的 css 样式所设置的尺寸。</li><li><code>window.devicePixelRatio</code>：浏览器的像素大小的比率（简称 dpr），表示设备的物理像素分辨率与 css 像素分辨率之比。或者可以直接理解为浏览器的缩放倍率。</li></ul><p>想要使图像保持清晰，就需要让上述的三个属性之间保持如下关系：</p><p><code>el.naturalWidth/Height</code> / <code>el.style.width/height</code> = <code>window.devicePixelRatio</code></p><p>即：</p><p>图像的自然尺寸 / 图像的样式尺寸 = 浏览器的缩放倍率</p><p>只要使图像的尺寸保持如上关系，无论如何放大缩小图像，图像始终都能保持清晰。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//设置一个 300 * 200 的 canvas 的清晰度</span>
<span class="token keyword">const</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span>height <span class="token operator">=</span> <span class="token number">200</span>
<span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;canvas&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&#39;2d&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ratio <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span>
canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>width <span class="token operator">*</span> ratio<span class="token punctuation">)</span>
canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>height <span class="token operator">*</span> ratio<span class="token punctuation">)</span>
canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">\`</span></span>
canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>height<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">\`</span></span>
context<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>ratio<span class="token punctuation">,</span> ratio<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),o=[p];function c(i,l){return a(),s("div",null,o)}const r=n(e,[["render",c],["__file","11.html.vue"]]);export{r as default};
